<md-card>
  <form>
    <div class="loading-container" layout="row" layout-align="center center" ng-if="!$ctrl.isContentLoaded">
      <md-progress-circular
        class="md-primary"
        md-diameter="60"></md-progress-circular>
    </div>
    <div class="content-container trans-height" layout="row" ng-if="$ctrl.isContentLoaded">
      <span flex="5"></span>
      <!-- Card Content row-->
      <div flex layout="column">
        <card-header
          show-btn-edit="true"
          title="{{$ctrl.title}}"
          on-edit-click="$ctrl.onEdit()"
          on-cancel-click="$ctrl.onCancel()"
          on-save-click="$ctrl.onSubmit()">
        </card-header>
        <div class="about-content" layout="row" layout-xs="column">

          <!-- Left column: Picture -->
          <div flex="25" class="about-img" layout="row" layout-align="start top" layout-align-xs="center center">
            <img ng-src="{{$ctrl.profilePicture}}" alt="Profile picture" class="sample">
          </div>

          <!-- Center column: Overview -->
          <div flex="30" layout="column">
            <div class="about-job">
              <!-- Function -->
              <div class="about-function about-job-detail">
                <div ng-if="!$ctrl.isEditModeEnabled">
                  <h4 class="to-upper-case">Function</h4>
                  <span>{{$ctrl.employee.function}}</span>
                </div>

                <div ng-if="$ctrl.isEditModeEnabled">
                  <md-input-container class="md-block" flex-gt-xs>
                    <label>Function</label>
                    <input required name="userFunctie" ng-model="$ctrl.employee.function">
                  </md-input-container>
                </div>
              </div>

              <!-- Unit -->
              <div class="about-unit about-job-detail">
                <div ng-if="!$ctrl.isEditModeEnabled">
                  <h4 class="to-upper-case">Unit</h4>
                  <span>{{$ctrl.employee.unit.name}}</span>
                </div>

                <div ng-if="$ctrl.isEditModeEnabled">
                  <md-input-container class="md-block" flex-gt-xs>
                    <label>Unit</label>
                    <input required name="userUnit" ng-model="$ctrl.employee.unit.name">
                  </md-input-container>
                </div>
              </div>

              <!-- Gender -->
              <div class="about-gender about-job-detail fade" ng-if="!$ctrl.isCollapsed">
                <div ng-if="!$ctrl.isEditModeEnabled">
                  <h4 class="to-upper-case">Gender</h4>
                  <span>{{$ctrl.employee.gender}}</span>
                </div>

                <div ng-if="$ctrl.isEditModeEnabled">
                  <md-input-container class="md-block" flex-gt-xs>
                    <label>Gender</label>
                    <input required name="userGender" ng-model="$ctrl.employee.gender">
                  </md-input-container>
                </div>
              </div>

              <!-- Start date -->
              <div class="about-start-date about-job-detail fade" ng-if="!$ctrl.isCollapsed">
                <div ng-if="!$ctrl.isEditModeEnabled">
                  <h4 class="to-upper-case">Start date</h4>
                  <span>{{$ctrl.employee.startDate}}</span>
                </div>
                <div ng-if="$ctrl.isEditModeEnabled">
                  <md-input-container class="md-block" flex-gt-xs>
                    <label>Start date</label>
                    <input required name="userStartDate" ng-model="$ctrl.employee.startDate">
                  </md-input-container>
                </div>
              </div>

              <!-- End date -->
              <div class="about-end-date about-job-detail fade"
                   ng-if="$ctrl.isCollapsed && $ctrl.employee.resignationDate !== '' && $ctrl.employee.resignationDate !== null">
                <h4>End date</h4>
                <span>{{$ctrl.employee.resignationDate}}</span>
              </div>
            </div>
          </div>

          <!-- Right column: Description -->
          <div flex="45" flex-gt-sm="70" class="about-description">
            <div ng-if="$ctrl.isEditModeEnabled">
              <md-input-container class="md-block" flex-gt-xs>
                <label>Description</label>
              <textarea ng-model="$ctrl.employee.description"
                        md-maxlength="2048"
                        md-select-on-focus>
              </textarea>
              </md-input-container>
            </div>
            <p ng-if="$ctrl.employee.description && !$ctrl.isEditModeEnabled">
              <span ng-if="$ctrl.isCollapsed">{{$ctrl.shortDescription}}</span>
              <span ng-if="!$ctrl.isCollapsed">{{$ctrl.employee.description}}</span>
            </p>
          </div>
        </div>

        <!-- Card footer -->
        <div layout="row" layout-align="end center" class="about-footer">
          <md-button ng-click="$ctrl.onExpandCollapseButtonClick()" class="md-raised md-primary">
            {{$ctrl.footerButtonLabel}}
          </md-button>
        </div>
      </div>
      <span flex="5"></span>
    </div>
  </form>
</md-card>
