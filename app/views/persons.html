<h1>People</h1>
<hr>
<h3>Filter</h3>
<div class="row">
    <div class="col-xs-6">
        <input ng-model="search.firstName" type="text" class="form-control" id="firstNameSearch"
               placeholder="First Name">
    </div>
    <div class="col-xs-6">
        <input ng-model="search.lastName" type="text" class="form-control" id="lastNameSearch" placeholder="Last Name">
    </div>
</div>
<hr>
<h3>List</h3>
<div class="row">
    <div class="col-lg-6">
        <table class="table table-hover table-striped table-bordered">
            <thead>
            <tr>
                <th>ID</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Username</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="person in persons | filter:search" ng-click="selectPerson(person)">
                <td>{{person.id}}</td>
                <td>{{person.firstName}}</td>
                <td>{{person.lastName}}</td>
                <td>{{person.credentials.username}}</td>
                <td ng-click="remove(person._links.self.href, $index)">Delete</td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="col-lg-6" ng-show="selectedPerson">
        <div class="row">
            <div class="col-lg-12">
                <h1>{{selectedPerson.firstName}} {{selectedPerson.lastName}}
                    <small>{{selectedPerson.id}}</small>
                </h1>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-3">
                <a href="" class="thumbnail">
                    <img data-src="holder.js/100%x180" alt="Profile Picture"
                         style="height: 180px; width: 100%; display: block;"
                         src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTcxIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE3MSAxODAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjxkZWZzLz48cmVjdCB3aWR0aD0iMTcxIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI0VFRUVFRSIvPjxnPjx0ZXh0IHg9IjYxIiB5PSI5MCIgc3R5bGU9ImZpbGw6I0FBQUFBQTtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMHB0O2RvbWluYW50LWJhc2VsaW5lOmNlbnRyYWwiPjE3MXgxODA8L3RleHQ+PC9nPjwvc3ZnPg=="
                         data-holder-rendered="true">
                </a>
            </div>
            <div class="col-md-9">
                <h4>Person Details</h4>
                <hr>
                <div class="slide">
                <dl class="dl-horizontal">
                  <dt>First Name</dt>
                  <dd>{{selectedPerson.firstName}}</dd>
                  <dt>Last Name</dt>
                  <dd>{{selectedPerson.lastName}}</dd>
                  <dt>Gender</dt>
                  <dd>{{selectedPerson.gender}}</dd>
                  <dt>Birth Date</dt>
                  <dd>{{selectedPerson.birthDate}}</dd>
                  <dt>Enrollment Date</dt>
                  <dd>{{selectedPerson.enrolmentDate}}</dd>
                </dl>
                </div>

              <h4>Role Details</h4>
              <hr>
              <!--<p ng-repeat="selectedPersonsApplicationRole in selectedPersonsApplicationRoles">
                Application role {{$index + 1}}: {{selectedPersonsApplicationRole}}
              </p>-->
              <p ng-repeat="selectedPersonsFunctionalRole in selectedPersonsFunctionalRoles">
                Functional role {{$index + 1}}: {{selectedPersonsFunctionalRole.name}} <button ng-click="deleteFunctionalRoleFromPerson(selectedPerson, selectedPersonsFunctionalRole)">Delete role</button>
              </p>

              <h4>Customer Details</h4>
              <hr>
              <p ng-repeat="selectedPersonsCustomer in selectedPersonsCustomers">
                Customer {{$index + 1}}: {{selectedPersonsCustomer.name}} ({{selectedPersonsCustomer.description}}) <button ng-click="deleteCustomerFromPerson(selectedPerson, selectedPersonsCustomer)">Delete customer</button>
              </p>

              <div>
                <h4>BUM's from person</h4>
                <hr>
                <p ng-repeat="selectedPersonsBum in selectedPersonsBums">
                  BUM {{$index + 1}}: {{selectedPersonsBum.firstName}} {{selectedPersonsBum.lastName}} from {{selectedPersonsBum.unit}}
                </p>
              </div>

              <div>
                <h4>CL's from person</h4>
                <hr>
                <p ng-repeat="selectedPersonsCL in selectedPersonsCLs">
                  CL {{$index + 1}}: {{selectedPersonsCL.firstName}} {{selectedPersonsCL.lastName}} from {{selectedPersonsCL.unit}}
                </p>
              </div>

              <div>
                <h4>PM's from person</h4>
                <hr>
                <p ng-repeat="selectedPersonsPM in selectedPersonsPMs">
                  PM {{$index + 1}}: {{selectedPersonsPM.firstName}} {{selectedPersonsPM.lastName}} from {{selectedPersonsPM.unit}}
                </p>
              </div>

              <div ng-if="isAdmin">
                <h4>Update Details</h4>
                <hr>
                <dl class="dl-horizontal">
                  <dt>First Name</dt>
                  <dd><input type="text" name="firstName" ng-model="selectedPerson.firstName"></dd>
                  <dt>Last Name</dt>
                  <dd><input type="text" name="lastName" ng-model="selectedPerson.lastName"></dd>
                  <dt>Gender</dt>
                  <dd><input type="text" name="gender" ng-model="selectedPerson.gender"></dd>
                  <button ng-click="updatePerson(selectedPerson)">Update</button>
                </dl>
              </div>

              <div ng-if="isAdmin || isHero">
                <h4>Assign Role to {{selectedPerson.firstName}} {{selectedPerson.lastName}}</h4>
                <hr>
                <select ng-model="selectedRole" name="selectRole">
                  <option ng-repeat="functionalRole in allFunctionalRoles" value="{{functionalRole.name}}">{{functionalRole.name}}</option>
                </select>
                <button ng-click="addFunctionalRoleToPerson()">Assign role</button>
              </div>

              <div ng-if="isAdmin || isHero">
                <h4>Assign Customer to {{selectedPerson.firstName}} {{selectedPerson.lastName}}</h4>
                <hr>
                <select ng-model="selectedCustomer" name="selectCustomer">
                  <option ng-repeat="customer in allCustomers" value="{{customer}}">{{customer.name}}</option>
                </select>
                <button ng-click="addCustomerToPerson()">Assign customer</button>
              </div>

              <div ng-if="isBum">
                <h4>Assign this employee to me (BUM)</h4>
                <hr>
                <button ng-click="addBumToPerson(selectedPerson)">Assign this employee to me (BUM)</button>
              </div>

              <div ng-if="isCL">
                <h4>Assign this employee to me (competence leader)</h4>
                <hr>
                <button ng-click="addCompetenceLeaderToPerson(selectedPerson)">Assign this employee to me (CL)</button>
              </div>

              <div ng-if="isPM">
                <h4>Assign this employee to me (practice manager)</h4>
                <hr>
                <button ng-click="addPracticeManagerToPerson(selectedPerson)">Assign this employee to me (PM)</button>
              </div>
            </div>
        </div>
    </div>
</div>
